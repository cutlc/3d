<!doctype html>
<html lang="en">
  <head>
    <title>&lt;model-viewer&gt; template</title>
    <meta charset="utf-8">
    <meta name="description" content="&lt;model-viewer&gt; template">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link type="text/css" href="./styles.css" rel="stylesheet"/>
    <style>
      @keyframes clickAnim {
        0% {transform: scale(1);}
        50% {transform: scale(0.8);}
        100% {transform: scale(1);}
      }

      #play-pause {
        position: absolute;
        width: 100px;
        height: 100px;
        bottom: 30px;
        left: 50%;
        cursor: pointer;
      }

      .active {
        animation: clickAnim 0.3s;
      }

    </style>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.5.0/model-viewer.min.js"></script>
  </head>
  <body>
    <model-viewer src="木门小样.glb" ar ar-modes="webxr scene-viewer quick-look" camera-controls tone-mapping="neutral" poster="poster.webp" shadow-intensity="1" _msthidden="1" animation-name="Cube.007Action" min-camera-orbit="auto auto 3m" camera-orbit="11.04deg 89.33deg 34.34m" field-of-view="30deg">
      <div class="progress-bar hide" slot="progress-bar">
          <div class="update-bar"></div>
      </div>
      <button slot="ar-button" id="ar-button" _msttexthash="294281" _msthidden="1" _msthash="90">
          View in your space
      </button>
      <div id="ar-prompt">
          <img src="ar_hand_prompt.png">
      </div>
    </model-viewer>
    
    <img id="play-pause" src="钥匙.png" alt="播放和暂停按钮">

    <script>
      var mv = document.querySelector('model-viewer');
      var button = document.getElementById('play-pause');

      mv.addEventListener('load', function() {
          mv.pause();
      });

      mv.addEventListener('loop', function() {
          mv.pause();
      });

      button.addEventListener('click', function() {
        // 点击时添加动画类
        button.classList.add('active');
        
        if (mv.paused) {
          mv.play();
          setTimeout(function() {
            mv.pause();
          }, 1792);
        } else {
          mv.play();
        }
        
        // 动画结束后移除类
        setTimeout(function(){
          button.classList.remove('active');
        }, 300);
      });
    </script>
  </body>
</html>
